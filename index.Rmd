---
title: "Sustainability"
author: "Kori Barach, Hannah Kim, Alex Rich"
date: "May 9th, 2023"
output:
  rmdformats::readthedown:
    highlight: "kate"
---

```{r setup, include = FALSE}
# Set code chunk defaults 
# Consider adding `message = FALSE` option
knitr::opts_chunk$set(echo = FALSE) 
                      
# Set R environment options
options(knitr.kable.NA = '')

# Load packages
library(tidyverse)

```

# Introduction 

  We all have a role to play in creating a sustainable future for ourselves and for generations to come. One of the most pressing issues we face today is the high level of energy consumption and the resulting impact on the environment. In 2021, the United States alone consumed a staggering 3,930 terawatt hours of energy, with a significant portion of it coming from non-renewable sources like fossil fuels. This has a detrimental effect on the environment, contributing to climate change, air and water pollution, and other environmental issues. Melting glaciers are threatening to flood our valuable land and cities. An estimated 15 million people around the world are at risk of suffering sudden, deadly, and destructive flooding events due to the warming climate. By caring about sustainability and making conscious choices about energy use, we can help to reduce our carbon footprint and create a more sustainable future.
  
  At Amherst College, we have a responsibility to reduce our energy consumption and minimize our environmental impact. By reducing energy consumption, we can save money and preserve resources for future generations. In our analysis, we look at sustainability within a few freshman dorms at Amherst College. We then look at data across the world and compare energy consumption country-to-country. Our goal is to bring attention to just how much energy is consumed and consequently allow readers to analyze their own carbon footprints.


## Website publication work flow

1. Edit Rmd

2. Knit to HTML to view progress. You may need to click "Open in Browser" for some content to show (sometimes content won't show until you actually push your changes to GitHub and view the published website).

3. Commit and push changes when you are ready. The website may take a couple minutes to update automatically after the push, but you may need to clear your browser's cache or view the page in a private/incognito window to see the changes more quickly. 


# Content

You can include text, `code`, and output as usual. Remember to take full advantage of Markdown and follow our [Style Guide](https://acstat231-f22.github.io/home/style-guide.html#Text_narration).

```{r ggplot-example, fig.align="left", out.width="100%"}
ggplot(data = cars, aes(x = speed, y = dist)) + 
  geom_point() + 
  labs(x = "Speed of car (mph)",
       y = "Distance taken to stop (ft)",
       title = "Stopping distance increases with faster speeds",
       subtitle = "Based on 1920s study") +
  theme_classic()
```

Examples and additional guidance are provided below. 

Take note of the the default code chunk options in the `setup` code chunk. For example, unlike the rest of the Rmd files we worked in this semester, the default code chunk option is `echo = FALSE`, so you will need to set `echo  = TRUE` for any code chunks you would like to display in the blog. You should be thoughtful and intentional about the code you choose to display. 


## Links 

Here is the link to our Shiny App on Sustainability of Amherst College Dorms:

[Shiny App](https://hankim25.shinyapps.io/shiny1-sustainability/) 


## Visualizations 

Visualizations, particularly interactive ones, will be well-received. That said, do not overuse visualizations. You may be better off with one complicated but well-crafted visualization as opposed to many quick-and-dirty plots. Any plots should be well-thought-out, properly labeled, informative, and visually appealing.

If you want to include dynamic visualizations or tables, you should explore your options from packages that are built from [**htmlwidgets**](https://www.htmlwidgets.org/showcase_leaflet.html). These **htmlwidgets**-based packages offer ways to build lighterweight, dynamic visualizations or tables that don't require an R server to run! A more complete list of packages is available on the linked website, but a short list includes:

* [**plotly**](https://plot.ly/r/): Interactive graphics with D3
* [**leaflet**](https://rstudio.github.io/leaflet/): Interactive maps with OpenStreetMap
* [**dygraphs**](http://rstudio.github.io/dygraphs): Interactive time series visualization
* [**visNetwork**](http://dataknowledge.github.io/visNetwork): Network graph visualization vis.js
* [**sparkline**](https://github.com/htmlwidgets/sparkline): Small inline charts
* [**threejs**](https://github.com/bwlewis/rthreejs): Interactive 3D graphics
    
You may embed a published Shiny app in your blog if useful, but be aware that there is a limited window size for embedded objects, which tends to makes the user experience of the app worse relative to a dedicated Shiny app page. Additionally, Shiny apps will go idle after a few minutes and have to be reloaded by the user, which may also affect the user experience. 

Any Shiny apps embedded in your blog should be accompanied by the link to the published Shiny app (I did this using a figure caption in the code chunk below, but you don't have to incorporate the link in this way).

```{r ds-salaries-app, out.width = "100%", out.extra = 'data-external="1" frameborder="no"', fig.cap = "[Data Science Salaries Shiny App](https://hankim25.shinyapps.io/shiny1-sustainability/)"}
knitr::include_app("https://hankim25.shinyapps.io/shiny1-sustainability/",
                   height = "500px")
```


## Tables

### **DT** package

The [**DT** package](https://rstudio.github.io/DT/) is great for making dynamic tables that can be displayed, searched, and filtered by the user without needing an R server or Shiny app!

Note: you should load any packages you use in the `setup` code chunk as usual. The `library()` functions are shown below just for demonstration.

```{r dt-example, message=FALSE, echo=TRUE}
library(DT)
mtcars %>% 
  select(mpg, cyl, hp) %>% 
  datatable(colnames = c("MPG", "Number of cylinders", "Horsepower"),
            filter = 'top',
            options = list(pageLength = 10, autoWidth = TRUE))
```

### **kableExtra** package

You can also use [**kableExtra**](https://cran.r-project.org/web/packages/kableExtra/vignettes/awesome_table_in_html.html) for customizing HTML tables.

```{r kable-example, echo=TRUE, message=FALSE}
library(kableExtra)
summary(cars) %>%
  kbl(col.names = c("Speed", "Distance"),
      row.names = FALSE) %>%
  kable_styling(bootstrap_options = "striped",
                full_width = FALSE) %>%
  row_spec(0, bold = TRUE) %>%
  column_spec(1:2, width = "1.5in") 
```


## Images

Images and gifs can be displayed using code chunks:

```{r, fig.cap='"Safe Space" by artist Kenesha Sneed', out.width="80%", fig.align="center"}
knitr::include_graphics("img/Kenesha-Sneed_safe-space.jpeg")
```


```{r, fig.cap="This is a figure caption", out.width="50%", fig.align="center"}
knitr::include_graphics("https://media.giphy.com/media/H7ZrrA9V2pd3Tehdds/giphy.gif")
```

You may also use Markdown syntax for displaying images as shown below, but code chunks offer easier customization of the image size and alignment.

![This is another figure caption](https://media.giphy.com/media/8i5IvxP9ZLgmjXN1BF/giphy.gif)

Either way, the file path can be a local path within your project directory or a URL for an image hosted online. This syntax works for PNG, PDF, JPG, and even GIF formats.







# Formatting

## Tabbed subsections {.tabset}

Each subsection below the "Tabbed subsections" section heading will appear in a tab. See R Markdown Cookbook [Section 7.6: Put content in tabs](https://bookdown.org/yihui/rmarkdown-cookbook/html-tabs.html) for additional customization options. 

### Bulleted list

You can make a bulleted list like this:

* item 1
* item 2
* item 3


### Numbered list


You can make a numbered list like this

1. First thing I want to say
2. Second thing I want to say
3. Third thing I want to say



## Column formatting

<!-- Begin columns environment -->
:::::: {style="display: flex; font-size: large;"}

<!-- Create a column -->
::: {}
### Content Column 1

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse vel ipsum eu sem facilisis porttitor. Integer eu tristique lectus. Vestibulum nisi risus, porta sit amet cursus nec, auctor ac tellus. Integer egestas viverra rhoncus. Fusce id sem non ante vestibulum posuere ac sed lorem. Proin id felis a mi pellentesque viverra in at nulla. Duis augue nulla, aliquet ac ligula a, sagittis varius lorem.



:::

<!-- Create another column (this one is just adding horizontal space to separate content) -->
::: {}
<div class="horizontalgap" style="width:60px"></div>
:::

<!-- Create another column -->
::: {}

### Content Column 2

Aliquam non ante et erat luctus hendrerit eu ac justo. Fusce lacinia pulvinar neque non laoreet. Fusce vitae mauris pharetra, scelerisque purus eget, pharetra nisl. Aenean volutpat elementum tortor vitae rhoncus. Phasellus nec tellus euismod neque congue imperdiet tincidunt in mauris. Morbi eu lorem molestie, hendrerit lorem nec, semper massa. Sed vulputate hendrerit ex, eget cursus purus. Pellentesque consequat erat leo, eleifend porttitor lacus porta at. Vivamus faucibus quam ipsum, id condimentum ligula malesuada ultrices. Nullam luctus leo elit, vitae rutrum nibh venenatis eget. Nam at sodales purus. Proin nulla tellus, lacinia eget pretium sed, vehicula aliquet neque. Morbi vel eros elementum, suscipit elit eu, consequat libero. Nulla nec aliquet neque. Nunc bibendum sapien lectus, sed elementum nisi rutrum non. Ut vulputate at lacus eget maximus.

```{r, out.width="80%", fig.align="right"}
mtcars %>% 
  ggplot(aes(x = wt, y = mpg)) +
  geom_point()
```

:::
::::::
<!-- End columns environment with matching length indicator-->




# Customizing your blog design


As a *final* detail **only** if you have time, you can explore options for customizing the style of your blog. By default, we are using the `readthedown` theme from the [**rmdformats** package](https://github.com/juba/rmdformats) (see Line 6 of this file if you want to switch out themes).


## Theme
You can use the [**rmdformats** package](https://github.com/juba/rmdformats) to play around with some pre-built themes. There are, I'm sure, many many many more similar packages with built in themes, or you can look into how to include a CSS code chunk to customize aspects of a theme.  

Using the **rmdformats** package, you can change the theme itself (Line 6): 

* `rmdformats::readthedown`
* `rmdformats::downcute` 
  * For `downcute` only, you can add a new indented line below Line 6 with the code `downcute_theme: "chaos"` for the `downcute chaos` theme
* `rmdformats::robobook` 
* `rmdformats::material`

You can explore additional YAML options by looking at the [**rmdformats** package](https://github.com/juba/rmdformats) page or running, for example, `?rmdformats::readthedown()` to see the help documentation for a particular theme from the package. 

## Synax highlighting

You can also change the code chunk syntax highlighting option (Line 7, `highlight`): 

* `"default"`
* `"tango"`
* `"pygments"`
* `"kate"`
* `"monochrome"`
* `"espresso"`
* `"zenburn"`
* `"haddock"`
* `"textmate"` 
* `NULL` for no syntax highlighting (not recommended)

## Font size, type, and other customization

Further customization requires adding a CSS style file or code chunk or incorporating other development options. Customization beyond the **rmdformats** package should be your lowest and final priority for the project. Ensure your content is fully prepared first.


# References

You can list R package citations with the code `citation("packageName")` in the console and then copy (and reformat as needed) the relevant text, e.g.,
```{r}
citation("png")
```

The following citations are based on the American Statistical Association citation style (not all of these references are used in this document).:


<!-- Textbook -->
1. Baumer, B. S., Kaplan, D. T., and Horton, N. J. (2021), *Modern Data Science with R* (2nd ed.), Boca Raton, FL: CRC Press.

<!-- Website -->
2. “U.S. electricity consumption 2021.” Statista, 25 January 2023, https://www.statista.com/statistics/201794/us-electricity-consumption-since-1975/. Accessed 2 May 2023.

<!-- Journal article -->
3. Jones, Benji. “Pakistan flooding: How melting glaciers fueled the disaster.” Vox, 30 August 2022, https://www.vox.com/science-and-health/2022/8/30/23327341/pakistan-flooding-monsoon-melting-glaciers-climate-change. Accessed 2 May 2023.

<!-- Dataset -->
4. “Home.” Kaggle, https://www.kaggle.com/datasets/truecue/worldsustainabilitydataset?resource=download. Accessed 2 May 2023.

<!-- R package -->
5. Wickham H, Averick M, Bryan J, Chang W, McGowan LD, François R,
  Grolemund G, Hayes A, Henry L, Hester J, Kuhn M, Pedersen TL, Miller E,
  Bache SM, Müller K, Ooms J, Robinson D, Seidel DP, Spinu V, Takahashi K,
  Vaughan D, Wilke C, Woo K, Yutani H (2019). “Welcome to the tidyverse.”
  _Journal of Open Source Software_, *4*(43), 1686.
  doi:10.21105/joss.01686 <https://doi.org/10.21105/joss.01686>. 
  
6. Robinson D, Hayes A, Couch S (2023). _broom: Convert Statistical Objects
  into Tidy Tibbles_. R package version 1.0.3,
  <https://CRAN.R-project.org/package=broom>.
  
7. Slowikowski K (2023). _ggrepel: Automatically Position Non-Overlapping
  Text Labels with 'ggplot2'_. R package version 0.9.3,
  <https://CRAN.R-project.org/package=ggrepel>.

8. Schloerke B, Cook D, Larmarange J, Briatte F, Marbach M, Thoen E, Elberg
  A, Crowley J (2021). _GGally: Extension to 'ggplot2'_. R package version
  2.1.2, <https://CRAN.R-project.org/package=GGally>.
  
9. Wickham H, Hester J, Bryan J (2022). _readr: Read Rectangular Text
  Data_. R package version 2.1.3,
  <https://CRAN.R-project.org/package=readr>.
  
10. Becker OScbRA, Minka ARWRvbRBEbTP, Deckmyn. A (2022). _maps: Draw
  Geographical Maps_. R package version 3.4.1,
  <https://CRAN.R-project.org/package=maps>.
  
11. Cheng J, Karambelkar B, Xie Y (2023). _leaflet: Create Interactive Web
  Maps with the JavaScript 'Leaflet' Library_. R package version 2.1.2,
  <https://CRAN.R-project.org/package=leaflet>.
  
12. Pebesma, E., 2018. Simple Features for R: Standardized Support for
  Spatial Vector Data. The R Journal 10 (1), 439-446,
  https://doi.org/10.32614/RJ-2018-009 
  
13. Bryan J (2023). _gapminder: Data from Gapminder_. R package version
  1.0.0, <https://CRAN.R-project.org/package=gapminder>.
  
14. H. Wickham. ggplot2: Elegant Graphics for Data Analysis. Springer-Verlag
  New York, 2016.

15. Benjamin S. Baumer, Daniel T. Kaplan, Nicholas J. Horton (2021). Modern
  Data Science with R. 2nd edition, Chapman and Hall/CRC Press: Boca
  Raton, 1--673. URL
  https://www.routledge.com/Modern-Data-Science-with-R/Baumer-Kaplan-Horton/p/book/9780367191498.

16. Wickham H, François R, Henry L, Müller K, Vaughan D (2023). _dplyr: A
  Grammar of Data Manipulation_. R package version 1.1.0,
  <https://CRAN.R-project.org/package=dplyr>.
  
17. Pedersen T, Robinson D (2022). _gganimate: A Grammar of Animated
  Graphics_. R package version 1.0.8,
  <https://CRAN.R-project.org/package=gganimate>.

18. Pedersen T (2022). _transformr: Polygon and Path Transformations_. R
  package version 0.1.4, <https://CRAN.R-project.org/package=transformr>.

19. Ooms J (2022). _gifski: Highest Quality GIF Encoder_. R package version
  1.6.6-1, <https://CRAN.R-project.org/package=gifski>.

20. Urbanek S (2022). _png: Read and write PNG images_. R package version
  0.1-8, <https://CRAN.R-project.org/package=png>.

